<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Votre Panier - Blesslev</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="logo-container">
    <img src="images/Blesslev.png" alt="Logo Blesslev" class="logo">
    <h1>Blesslev</h1>
  </div>
    <nav>
      <a href="index.html">Accueil</a>
      <a href="catalogue.html">Catalogue</a>
      <a href="panier.html">Panier</a>
    </nav>
  </header>


<main>
  <section class="panier">
    <h2>ðŸ›’ Votre Panier</h2>

    <div id="liste-panier" class="liste-panier"></div>

    <h3 id="total-panier">Total : 0,00 â‚¬</h3>
    <button id="btn-commander">Commander</button>
  </section>
</main>
<footer>
  <div class="footer-content">
    <div>
      <h3>Blesslev</h3>
      <p>Votre boutique en ligne de confiance âœ¨</p>
    </div>

    <div>
      <h4>Liens utiles</h4>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="catalogue.html">Catalogue</a></li>
        <li><a href="panier.html">Panier</a></li>
      </ul>
    </div>

    <div>
      <h4>Contact</h4>
      <p>Email : Levana@blesslev.fr</p>
      <p>TÃ©lÃ©phone : 06.09.61.92.71</p>
    </div>
  </div>

  <div class="footer-bottom">
    <p>Â© 2025 Ma Boutique - Tous droits rÃ©servÃ©s</p>
  </div>
</footer>

<script>
  const euro = n => n.toFixed(2).replace(".", ",") + " â‚¬";
  const savePanier = (p) => localStorage.setItem("panier", JSON.stringify(p));
  const loadPanier = () => JSON.parse(localStorage.getItem("panier")) || [];

  let panier = loadPanier().map(i => ({
    ...i,
    prix: Number(i.prix),
    quantite: Number(i.quantite) || 1
  })).filter(i => !isNaN(i.prix));

  function render() {
    
  const container = document.getElementById("liste-panier");
  container.innerHTML = "";
  let total = 0;

  panier.forEach((item, index) => {
    const sousTotal = item.prix * item.quantite;
    total += sousTotal;

    const div = document.createElement("div");
    div.className = "panier-item";
    div.innerHTML = `
  <h4>${item.nom}</h4>
  <span class="prix">${euro(item.prix)}</span>
  <div class="qte-control">
    <button class="moins" data-i="${index}">âˆ’</button>
    <input type="number" min="1" value="${item.quantite}" data-i="${index}">
    <button class="plus" data-i="${index}">+</button>
  </div>
  <span class="prix">${euro(sousTotal)}</span>
  <button class="supprimer" data-i="${index}">âœ•</button>
`;
    container.appendChild(div);
  });

  document.getElementById("total-panier").textContent = "Total : " + euro(total);
  savePanier(panier);
}

  

  // Ã‰couteurs (dÃ©lÃ©gation)
  document.getElementById("liste-panier").addEventListener("click", (e) => {
    const i = Number(e.target.dataset.i);
    if (e.target.classList.contains("plus")) { panier[i].quantite++; render(); }
    if (e.target.classList.contains("moins")) { panier[i].quantite--; if (panier[i].quantite < 1) panier.splice(i,1); render(); }
    if (e.target.classList.contains("supprimer")) { panier.splice(i,1); render(); }
  });

  document.getElementById("liste-panier").addEventListener("change", (e) => {
    if (e.target.type === "number") {
      const i = Number(e.target.dataset.i);
      let val = parseInt(e.target.value, 10);
      if (!Number.isFinite(val) || val < 1) val = 1;
      panier[i].quantite = val;
      render();
    }
  });

  render();
  document.getElementById("btn-commander").addEventListener("click", () => {
  // Avant de passer Ã  la commande, on vÃ©rifie que le panier nâ€™est pas vide
  if (!panier.length) {
    alert("Votre panier est vide !");
    return;
  }

  // On peut aussi sauvegarder le total pour le retrouver sur la page commande
  localStorage.setItem("totalCommande", document.getElementById("total-panier").textContent);

  // Redirection vers la page commande
  window.location.href = "commander.html";
});

</script>
